<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles del Producto</title>
    <link rel="stylesheet" href="css/tienda.css">
    <link rel="stylesheet" href="css/productos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<script>
document.addEventListener('DOMContentLoaded', async () => {
    // Obtener el id del producto desde la URL
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');
    if (!id) return;

    // Cargar los productos desde el JSON
    const response = await fetch('src/json/productos.json');
    const productos = await response.json();

    // Buscar el producto por id
    const producto = productos.find(p => p.id === id);
    if (!producto) return;

    // Llenar los datos en la página
    document.getElementById('product-img').src = producto.imagen;
    document.getElementById('product-title').textContent = producto.titulo;
    document.getElementById('product-seller-name').textContent = producto.vendedor || '';
    document.getElementById('product-price').textContent = 'S/ ' + producto.precio;
    document.getElementById('product-rating-value').textContent = producto.calificacion;

    // Mostrar estrellas (opcional)
    const starsContainer = document.getElementById('product-stars');
    if (starsContainer) {
        starsContainer.innerHTML = '';
        const fullStars = Math.floor(producto.calificacion);
        const halfStar = producto.calificacion % 1 >= 0.5;
        for (let i = 0; i < fullStars; i++) {
            starsContainer.innerHTML += '<i class="fas fa-star filled"></i>';
}
        if (halfStar) {
            starsContainer.innerHTML += '<i class="fas fa-star-half-alt filled"></i>';
}
        for (let i = fullStars + halfStar; i < 5; i++) {
             starsContainer.innerHTML += '<i class="far fa-star"></i>';
}
    }

    // Mostrar la descripción
    const descContainer = document.getElementById('product-description');
    if (descContainer && Array.isArray(producto.descripcion)) {
        descContainer.innerHTML = '';
        producto.descripcion.forEach(linea => {
            const li = document.createElement('li');
            li.textContent = linea;
            descContainer.appendChild(li);
        });
    }
});

</script>
<body>
    <header>
        <div>
            <a href="tienda.html">
                <img class="logo" src="assets/img/unego.png" alt="Unego Logo">
            </a>
        </div>
        <div class="search-bar">
            <input type="search" id="product-search" placeholder="Buscar productos">
            <i class="fas fa-search"></i>
        </div>
        <div class="user-actions">
            <i class="fas fa-bell"></i>
            <div class="user-profile">
                <a href="perfil-ivan.html">
                    <img src="assets/img/foto-perfil1-png.png" alt="User Profile">
                </a>
            </div>
        </div>
    </header>

<div class="page-content-wrapper">
    <main class="main-content-product">
        <div class="product-detail-card">
            
            <!-- Imagen del producto -->
            <div class="product-image-large">
                <img id="product-img" src="" alt="Imagen del producto">
            </div>

            <!-- Información del producto -->
            <div class="product-info">
                <div class="title-container">
                    <h1 id="product-title">Cargando...</h1>
                    <button id="buy-button">Comprar</button>
                </div>
                <p class="product-seller"><span id="product-seller-name"></span></p>
                <div class="product-price-detail">Precio: <span id="product-price"></span></div>

                <!-- Descripción y calificación -->
                <div class="product-rating-detail">
                    <div class="description-info">
                        <h3 class="detail">Descripción:</h3>
                        <ul class="product-description" id="product-description"></ul>
                    </div>
                    <div class="rating-info">
                        <h2 class="score">Calificación:</h2> 
                        <span id="product-rating-value"></span>
                        <div class="stars" id="product-stars"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>


    <script src="src/js/script_productos.js"></script>
</body>
</html>