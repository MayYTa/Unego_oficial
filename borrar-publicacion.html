<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Usuario - Unego</title>
    <link rel="stylesheet" href="css/tienda.css">
    <link rel="stylesheet" href="css/perfil.css">
    <link rel="stylesheet" href="css/borrar-publicacion.css"> <!-- Vinculación del CSS personalizado -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header style="background: #F7F9FD; box-shadow: 0 2px 8px rgba(0,0,0,0.03); padding: 0;">
    <div style="display: flex; flex-direction: row; align-items: flex-start; justify-content: space-between; width: 100%; position: relative; min-height: 110px;">
        <!-- Logo Unego -->
        <div style="flex: 0 0 auto; margin-left: 100px; display: flex; align-items: center; height: 110px;">
            <a href="tienda.html">
                <img class="logo" src="assets/img/unego.png" alt="Unego Logo" style="height: 70px;">
            </a>
        </div>
        <!-- Barra de búsqueda centrada arriba -->
        <div style="position: absolute; left: 50%; top: 20px; transform: translateX(-50%); width: 40%; min-width: 280px; max-width: 500px;">
            <div class="search-bar" style="width: 100%;">
                <input type="search" id="product-search" placeholder="Buscar productos" style="width: 100%; padding: 10px 18px; border-radius: 24px; border: 1px solid #ccc; font-size: 16px; outline: none;">
                <i class="fas fa-search" style="position: absolute; right: 18px; top: 50%; transform: translateY(-50%); color: #888;"></i>
            </div>
        </div>
        <!-- Iconos derecha -->
        <div style="flex: 0 0 auto; display: flex; align-items: center; position: absolute; right: 100px; top: 30px;">
            <!-- Campana -->
            <i class="fas fa-bell" style="font-size: 1.7rem; color: #555; margin-right: 50px; cursor: pointer;"></i>
            <!-- Perfil Pastelería de Valeria -->
            <div class="user-profile" style="display: flex; align-items: center;">
                <a href="perfil.html">
                    <img src="assets/img/pasteleriaDeValeria.png" alt="User Profile" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 3px solid #F7FAFF; box-shadow: 0 2px 8px rgba(0,0,0,0.07);">
                </a>
            </div>
        </div>
    </div>
</header>

    <div class="profile-page-content-wrapper">
        <div class="perfil-header">
            <div class="perfil-img">
                <img src="assets/img/foto-perfil1-png.png" alt="Foto de Perfil">
            </div>
            <div class="perfil-info">
                <div class="perfil-nombre">Pastelería de Valeria</div>
                <div class="perfil-estadisticas">
                    <span><span id="num-publicaciones">2</span> publicaciones</span>
                    <span>500 seguidores</span>
                    <span>10 seguidos</span>
                </div>
            </div>
            <div class="perfil-acciones">
                <a href="editar-perfil.html" class="btn btn-perfil-primary">Editar Perfil</a>
            </div>
        </div>

        <div class="perfil-tabs">
            <a href="#" class="tab-item tab-activo">Publicaciones</a>
            <a href="#" class="tab-item">Favoritos</a>
            <a href="#" class="tab-item">Reseñas</a>
            <a href="#" class="tab-item">Historial de Pedidos</a>
        </div>

        <div class="profile-products-grid" id="publicaciones-grid">
            <!-- Publicación Pastel de Fresa -->
            <a class="product-link">
                <div class="product-card publicacion">
                    <div class="top-right-actions">
                        <i class="fas fa-ellipsis-h" onclick="togglePopup(this)"></i>
                        <div class="popup">
                            <button onclick="editarPublicacion(this)">Editar publicación</button>
                            <button onclick="borrarPublicacion(this)">Borrar publicación</button>
                        </div>
                    </div>
                    <div class="product-image" style="float:left; margin-right:18px;">
                        <img src="assets/img/pastelDeFresa.png" alt="Pastel de Fresa" style="width:90px; height:90px; object-fit:cover; border-radius:8px;">
                    </div>
                    <div class="product-details" style="overflow:hidden;">
                        <h3 class="product-title">Pastel de Fresa</h3>
                        <p class="product-seller">Por Pastelería de Valeria</p>
                        <div class="product-price" data-price="10">Desde S/ 10</div>
                        <div class="product-rating" data-rating="4.9">
                            <span class="rating-value">4.9</span>
                            <div class="stars">
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                            </div>
                        </div>
                    </div>
                    <div class="product-actions">
                        <i class="far fa-bookmark"></i>
                    </div>
                </div>
            </a>
            <!-- Publicación Pastel de Chocolate -->
            <a class="product-link">
                <div class="product-card publicacion">
                    <div class="top-right-actions">
                        <i class="fas fa-ellipsis-h" onclick="togglePopup(this)"></i>
                        <div class="popup">
                            <button onclick="editarPublicacion(this)">Editar publicación</button>
                            <button onclick="borrarPublicacion(this)">Borrar publicación</button>
                        </div>
                    </div>
                    <div class="product-image" style="float:left; margin-right:18px;">
                        <img src="assets/img/pastelDechocolate.png" alt="Pastel de Chocolate" style="width:90px; height:90px; object-fit:cover; border-radius:8px;">
                    </div>
                    <div class="product-details" style="overflow:hidden;">
                        <h3 class="product-title">Pastel de<br>Chocolate</h3>
                        <p class="product-seller">Por Pastelería de Valeria</p>
                        <div class="product-price" data-price="8">Desde S/ 8</div>
                        <div class="product-rating" data-rating="4.7">
                            <span class="rating-value">4.7</span>
                            <div class="stars">
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                            </div>
                        </div>
                    </div>
                    <div class="product-actions">
                        <i class="far fa-bookmark"></i>
                    </div>
                </div>
            </a>
            <!-- Publicación Torta con Decoración -->
            <a class="product-link">
                <div class="product-card publicacion">
                    <div class="top-right-actions">
                        <i class="fas fa-ellipsis-h" onclick="togglePopup(this)"></i>
                        <div class="popup">
                            <button onclick="editarPublicacion(this)">Editar publicación</button>
                            <button onclick="borrarPublicacion(this)">Borrar publicación</button>
                        </div>
                    </div>
                    <div class="product-image" style="float:left; margin-right:18px;">
                        <img src="assets/img/tortaConDecoracion.png" alt="Torta con decoración" style="width:90px; height:90px; object-fit:cover; border-radius:8px;">
                    </div>
                    <div class="product-details" style="overflow:hidden;">
                        <h3 class="product-title">Torta con decoración</h3>
                        <p class="product-seller">Por Pastelería de Valeria</p>
                        <div class="product-price" data-price="25">Desde S/ 25</div>
                        <div class="product-rating" data-rating="4.7">
                            <span class="rating-value">4.7</span>
                            <div class="stars">
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                                <i class="fas fa-star filled"></i>
                            </div>
                        </div>
                    </div>
                    <div class="product-actions">
                        <i class="far fa-bookmark"></i>
                    </div>
                </div>
            </a>
        </div>

        <div id="undo-message" style="display:none; position:fixed; left:50%; bottom:40px; transform:translateX(-50%); background:#fff; color:#222; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.07); padding:16px 24px; font-size:1.1rem; z-index:9999; align-items:center; gap:16px; display:flex;">
            Publicación eliminada. 
            <button onclick="deshacerBorrado()" style="margin-left:20px; background:#3498db; color:#fff; border:none; border-radius:6px; padding:8px 16px; font-weight:bold; cursor:pointer;">Deshacer cambios</button>
        </div>
    </div>

    <footer style="background: #fff; border-top: 1px solid #e0e0e0; margin-top: 40px;">
    <div class="footer-content" style="max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; padding: 40px 20px 20px 20px; gap: 30px;">
        <!-- Logo y frase motivacional -->
        <div class="footer-section" style="flex: 1 1 200px; min-width: 180px; display: flex; flex-direction: column; align-items: flex-start;">
            <img src="assets/img/unego_logo.png" alt="Unego Logo" style="width: 120px; margin-bottom: 16px;">
            <div class="footer-celeste" style="font-size: 1.15rem; font-weight: 600; color: #3498db; line-height: 1.3;">
                Nunca es tarde para emprender<br>¡Empieza desde hoy!
            </div>
        </div>
        <!-- Empresa -->
        <div class="footer-section" style="flex: 1 1 200px; min-width: 180px;">
            <h4 class="footer-celeste" style="margin-bottom: 18px; color: #3498db;">Empresa</h4>
            <ul style="list-style: none; padding: 0; margin: 0;">
                <li><a href="about_us.html">Sobre Nosotros</a></li>
                <li><a href="universities.html">Universidades Aliadas</a></li>
                <li><a href="q_a.html">Preguntas Frecuentes</a></li>
            </ul>
        </div>
        <!-- Producto -->
        <div class="footer-section" style="flex: 1 1 200px; min-width: 180px;">
            <h4 class="footer-celeste" style="margin-bottom: 18px; color: #3498db;">Producto</h4>
            <ul style="list-style: none; padding: 0; margin: 0;">
                <li><a href="#">Catálogo</a></li>
                <li><a href="#">Categorías</a></li>
                <li><a href="#">Ofertas del Mes</a></li>
            </ul>
        </div>
        <!-- Contáctanos -->
        <div class="footer-section" style="flex: 1 1 240px; min-width: 220px;">
            <h4 class="footer-celeste" style="margin-bottom: 18px; color: #3498db;">Contáctanos</h4>
            <p style="margin: 0 0 8px 0;"><i class="fas fa-phone"></i> Teléfono: 01 2111111</p>
            <p style="margin: 0 0 8px 0;"><i class="fab fa-whatsapp"></i> Whatsapp: +51 999 888 777</p>
            <p style="margin: 0 0 12px 0;"><i class="fab fa-whatsapp"></i> Whatsapp: +51 999 777 665</p>
            <div class="social-links" style="display: flex; gap: 12px;">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
        <!-- Políticas (más a la derecha) -->
        <div class="footer-section" style="flex: 1 1 200px; min-width: 180px; margin-left: 40px;">
            <h4 class="footer-celeste" style="margin-bottom: 18px; color: #3498db;">Políticas</h4>
            <ul style="list-style: none; padding: 0; margin: 0;">
                <li><a href="#">Condiciones</a></li>
                <li><a href="#">Privacidad</a></li>
                <li><a href="#">Configuración de Cookies</a></li>
            </ul>
        </div>
    </div>
    <!-- Línea horizontal gris delgada -->
    <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 10px 0 0 0; width: 100%;">
    <div class="footer-bottom" style="text-align: center; padding: 18px 0 8px 0; color: #888; font-size: 1rem;">
        &copy; 2025 Unego | Todos los derechos reservados.
    </div>
</footer>

    <script>
let publicacionEliminada = null;
let publicacionPadre = null;

function togglePopup(icon) {
    const popup = icon.nextElementSibling;
    // Cierra otros popups
    document.querySelectorAll(".popup").forEach(p => {
        if (p !== popup) p.classList.remove("show");
    });
    popup.classList.toggle("show");
}

function borrarPublicacion(btn) {
    const card = btn.closest(".publicacion");
    publicacionEliminada = card.cloneNode(true);
    publicacionPadre = card.parentNode;
    card.remove();
    document.getElementById("undo-message").style.display = "flex";
    actualizarNumeroPublicaciones();
}

function editarPublicacion(btn) {
    // Aquí puedes agregar la lógica para editar en el futuro
}

function deshacerBorrado() {
    if (publicacionEliminada && publicacionPadre) {
        publicacionPadre.appendChild(publicacionEliminada);
        document.getElementById("undo-message").style.display = "none";
        publicacionEliminada = null;
        publicacionPadre = null;
        actualizarNumeroPublicaciones();
    }
}

function actualizarNumeroPublicaciones() {
    const count = document.querySelectorAll('.publicacion').length;
    const numElem = document.getElementById('num-publicaciones');
    if(numElem) numElem.textContent = count;
}

// Ocultar popup al hacer clic fuera
document.addEventListener("click", function (e) {
    if (!e.target.classList.contains("fas") && !e.target.closest(".popup")) {
        document.querySelectorAll(".popup").forEach(p => p.classList.remove("show"));
    }
});

// Oculta el mensaje de deshacer al cargar
window.addEventListener('DOMContentLoaded', function() {
    document.getElementById("undo-message").style.display = "none";
    actualizarNumeroPublicaciones();
});
</script>
</body>
</html>